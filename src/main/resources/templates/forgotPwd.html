<!DOCTYPE html>
<!-- beautify ignore:start -->
<html xmlns:th="http://www.thymeleaf.org"
  lang="en"
  class="light-style customizer-hide"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="../assets/"
  data-template="vertical-menu-template-free"
>
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
  />

  <title>POLAROID</title>

  <meta name="description" content="" />

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/img/favicon/favicon.ico" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
    rel="stylesheet"
  />

  <!-- Icons. Uncomment required icon fonts -->
  <link rel="stylesheet" href="/vendor/fonts/boxicons.css" />

  <!-- Core CSS -->
  <link rel="stylesheet" href="/vendor/css/core.css" class="template-customizer-core-css" />
  <link rel="stylesheet" href="/vendor/css/theme-default.css" class="template-customizer-theme-css" />
  <link rel="stylesheet" href="/css/demo.css" />

  <!-- add css -->
  <link rel="stylesheet" href="/css/add-style.css">

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

  <!-- Page CSS -->
  <!-- Page -->
  <link rel="stylesheet" href="/vendor/css/pages/page-auth.css" />
  <!-- Helpers -->
  <script src="/vendor/js/helpers.js"></script>

  <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
  <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
  <script src="/js/config.js"></script>
  <style>
     .sendEmailFailure{
      color:red; 
      display: none;
      text-align: center;
      width: 100%
   }
  </style>
</head>

  <body>
    <!-- Content -->

    <div class="container-xxl">
      <div class="authentication-wrapper authentication-basic container-p-y">
        <div class="authentication-inner py-4">
          <!-- Forgot Password -->
          <div class="card">
            <div class="card-body">
              <!-- Logo -->
              <h1 class="logo-box">
                <a href="#">
                  <img src="/img/polaroid_logo.png" alt="polaroid logo" class="logo-login">
                </a>
              </h1>
              <!-- /Logo -->
            
              <h5 class="text-align weight">로그인에 문제가 있나요?</h5>
              <p class="mb-4 text-align">
                이메일을 입력하시면 계정에 다시 액세스할 수 있는 링크를 보내드립니다.</p>
              <form id="formAuthentication" class="mb-3" action="/forgotPwd" method="POST">
                <div class="mb-3">
                 
                  <input
                    type="text"
                    class="form-control"
                    id="memberEmail"
                    name="memberEmail"
                    placeholder="이메일을 입력해주세요."
                    autofocus
                  />
                </div>
                
                <span class="sendEmailFailure">가입되지 않은 이메일입니다.<br>이메일을 다시 확인해주세요.</span>
                
                <button type="button" class="btn btn-primary d-grid w-100" id="sendMail">로그인 링크 보내기</button>
              </form>
              <div class="text-center">
                <a th:href="@{loginForm}" class="d-flex align-items-center justify-content-center">
                  <i class="bx bx-chevron-left scaleX-n1-rtl bx-sm"></i>
                  로그인으로 돌아가기
                </a>
              </div>
            </div>
          </div>
          <!-- /Forgot Password -->
        </div>
      </div>
    </div>

    <!-- / Content -->

    

    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="../assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->

    <!-- Main JS -->
    <script src="../assets/js/main.js"></script>

    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.17.0/dist/jquery.validate.min.js"></script>
     
     <script th:inline="javascript">
     $("#sendMail").click(function(){
        var memberEmail = $('#memberEmail').val();
      $.ajax({
            method: "POST",
            url: "./forgotPwd",
            data: JSON.stringify({
               memberEmail : memberEmail
            }),
            contentType: "application/json",
            dataType: "json",
            success: function(data){
               console.log("data : ", data);
               if(data == "1") {
                  alert("비밀번호 변경 링크가 전송 되었습니다.\n이메일을 확인해주세요.");
                  location.href="/forgotPwd";
               } else {
                  $(".sendEmailFailure").css("display", "inline-block");
               }
            },
            error: function(error){
               return false;
            }
      });
      
   });
     </script>
  </body>
</html>